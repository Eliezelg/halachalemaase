(()=>{var e={};e.id=120,e.ids=[120],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},9748:e=>{"use strict";e.exports=require("fs/promises")},3873:e=>{"use strict";e.exports=require("path")},1401:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>L,routeModule:()=>b,serverHooks:()=>y,workAsyncStorage:()=>S,workUnitAsyncStorage:()=>P});var i={};t.r(i),t.d(i,{DELETE:()=>x,GET:()=>h,POST:()=>k,PUT:()=>j});var n=t(2706),s=t(8203),a=t(5994),o=t(9187),p=t(3873),d=t.n(p),u=t(9748),c=t.n(u);let l=[{id:"1",title:"הליכות שבת סימנים שיג-שיח רנג-רנט",image:"/Sfarim/shabbat313.jpg",price:"₪85 כולל משלוח",description:'על סדר השו"ע עם דינים אקטואלים הלכה למעשה\nתוך שימת לב לחילוק הדינים בין בני ספרד לבני אשכנז\nבשפה ברורה ונעימה',nedarimPlusLink:"https://nedar.im/ilfP",isNew:!0},{id:"2",title:"הליכות ברכות סימנים קסג עד רא",image:"/Sfarim/Brachot163.jpg",price:"₪80 כולל משלוח",description:'על סדר השו"ע עם דינים אקטואלים הלכה למעשה,\r\nתוך שימת לב לחילוק הדינים בין בני ספרד לבני אשכנז,\r\nבשפה ברורה ונעימה',nedarimPlusLink:"https://nedar.im/qUBr",isNew:!1},{id:"3",title:"הליכות ברכות סימנים רב עד רכז",image:"/Sfarim/brachot202.jpg",price:"₪80 כולל משלוח",description:'על סדר השו"ע עם דינים אקטואלים הלכה למעשה\nתוך שימת לב לחילוק הדינים בין בני ספרד לבני אשכנז\nבשפה ברורה ונעימה',nedarimPlusLink:"https://nedar.im/RngJ"},{id:"4",title:"לוח ברכות כיס",image:"/Sfarim/LuachBrachot.jpg",price:"₪30 כולל משלוח",description:"מפתח מפורט של\nברכות שהחיינו\nברכות הנהנין ועוד...",nedarimPlusLink:"https://nedar.im/LuachBrachot"},{id:"5",title:"שאלות ותשובות בהלכות שבת א'",image:"/Sfarim/shabbat1.jpg",price:"₪75 כולל משלוח",description:"שאלות ותשובות בהלכות שבת\nתוך שימת לב לחילוק הדינים בין בני ספרד לאשכנז\nבשפה ברורה ונעימה",nedarimPlusLink:"https://nedar.im/SBCi"},{id:"6",title:"שאלות ותשובות בהלכות שבת ב'",image:"/Sfarim/shabbat2.jpg",price:"₪75 כולל משלוח",description:"שאלות ותשובות בהלכות שבת\nתוך שימת לב לחילוק הדינים בין בני ספרד לאשכנז\nעם סיכומים ודיונים הלכתיים בנושאים פופולארים\nבשפה ברורה ונעימה",nedarimPlusLink:"https://nedar.im/HXvh"},{id:"7",title:"הליכות שבת סימנים שב עד שיב",image:"/Sfarim/Shabbat302.jpg",price:"₪85 כולל משלוח",description:'על סדר השו"ע עם דינים אקטואלים הלכה למעשה\nתוך שימת לב לחילוק הדינים בין בני ספרד לבני אשכנז\nבשפה ברורה ונעימה\nכולל לוח מוקצה מפורט',nedarimPlusLink:"https://nedar.im/HEyt"},{id:"8",title:"הליכות מועד פסח",image:"/Sfarim/MoedNissan.jpg",price:"₪75 כולל משלוח",description:"ניסן, הכשרת המטבח, ביעור חמץ, בדיקת חמץ, הכשר המוצרים, ליל הסדר ספירת העומר ועוד...\nתוך שימת לב לחילוק הדינים בין בני ספרד לבני אשכנז\nהלכה למעשה\nבשפה ברורה ונעימה",nedarimPlusLink:"https://nedar.im/IhET"},{id:"9",title:"הליכות מועד חנוכה טו בשבט פורים",image:"/Sfarim/MoedHannuka.jpg",price:"₪75 כולל משלוח",description:"תוך שימת לב לחילוק הדינים בין בני ספרד לבני אשכנז\nהלכה למעשה\nבשפה ברורה נעימה",nedarimPlusLink:"https://www.matara.pro/nedarimplus/online/?S=ezMH"},{id:"10",title:"הליכות מועד אלול",image:"/Sfarim/MoedElul.jpg",price:"₪75 כולל משלוח",description:"ראש השנה, עשרת ימי תשובה, יום הכיפורים, סוכות הושענא רבא\nתוך שימת לב לחילוק הדינים בין בני ספרד לבני אשכנז\nהלכה למעשה\nבשפה ברורה נעימה",nedarimPlusLink:"https://nedar.im/MVPT"},{id:"11",title:"הליכות שבת ד כרכים",image:"/Sfarim/shabbat4.jpg",price:"₪260 כולל משלוח",description:"הכולל  הליכות שבת א' וב', הליכות שבת סימנים שב-שיב, והליכות שבת סימנים שיג-שיח רנג-רנט\nעם דינים אקטואלים הלכה למעשה\nתוך שימת לב לחילוק הדינים בין בני ספרד לבני אשכנז\nבשפה ברורה ונעימה\nכולל לוח מוקצה מפורט",nedarimPlusLink:"https://nedar.im/izjq"},{id:"12",title:"הליכות מועד ג כרכים",image:"/Sfarim/Moed3.jpg",price:"₪215 כולל משלוח",description:"תוך שימת לב לחילוק הדינים בין בני ספרד לבני אשכנז\nהלכה למעשה\nבשפה ברורה נעימה",nedarimPlusLink:"https://www.matara.pro/nedarimplus/online/?S=cVDQ"},{id:"13",title:"הליכות ברכות ב כרכים",image:"/Sfarim/brachot2.jpg",price:"₪150 כולל משלוח",description:'על סדר השו"ע עם דינים אקטואלים הלכה למעשה\nתוך שימת לב לחילוק הדינים בין בני ספרד לבני אשכנז\nבשפה ברורה ונעימה',nedarimPlusLink:"https://www.matara.pro/nedarimplus/online/?S=utlj"},{id:"14",title:"דיסק און קיי",image:"/Sfarim/USB.jpg",price:"₪225 כולל משלוח",description:"דיסק און קי כל השיעורים כולל משלוח",nedarimPlusLink:"https://www.matara.pro/nedarimplus/online/?S=RDqt"}],m=d().join(process.cwd(),"data/books.ts"),g=d().join(process.cwd(),"public/Sfarim");async function f(){return l}async function w(e){let r=`import { Book } from '../types/books';

export const books: Book[] = ${JSON.stringify(e,null,2)};`;await c().writeFile(m,r,"utf-8")}async function h(){try{let e=await f();return o.NextResponse.json({books:e})}catch(e){return o.NextResponse.json({error:"Error reading books"},{status:500})}}async function k(e){try{let r=await e.formData(),t=r.get("title"),i=r.get("description"),n=r.get("price"),s=r.get("image"),a=r.get("nedarimPlusLink"),p="true"===r.get("isNew");if(!t||!i||!n||!s)return o.NextResponse.json({error:"Missing required fields"},{status:400});await c().mkdir(g,{recursive:!0});let u=s.name.split(".").pop(),l=`${Date.now()}.${u}`,m=d().join(g,l),h=await s.arrayBuffer(),k=Buffer.from(h);await c().writeFile(m,k);let j=await f(),x={id:(j.length+1).toString(),title:t,description:i,price:`₪${n} כולל משלוח`,image:`/Sfarim/${l}`,nedarimPlusLink:a,isNew:p};return j.push(x),await w(j),o.NextResponse.json(x)}catch(e){return console.error("Error creating book:",e),o.NextResponse.json({error:"Error creating book"},{status:500})}}async function j(e){try{let r=await e.formData(),t=r.get("id"),i=r.get("title"),n=r.get("description"),s=r.get("price"),a=r.get("image"),p=r.get("nedarimPlusLink"),u="true"===r.get("isNew");if(!t||!i||!n||!s)return o.NextResponse.json({error:"Missing required fields"},{status:400});let l=await f(),m=l.findIndex(e=>e.id===t);if(-1===m)return o.NextResponse.json({error:"Book not found"},{status:404});let h={...l[m],title:i,description:n,price:`₪${s} כולל משלוח`,nedarimPlusLink:p,isNew:u};if(a){let e=d().join(process.cwd(),"public",l[m].image);try{await c().unlink(e)}catch(e){console.error("Error deleting old image:",e)}let r=a.name.split(".").pop(),t=`${Date.now()}.${r}`,i=d().join(g,t),n=await a.arrayBuffer(),s=Buffer.from(n);await c().writeFile(i,s),h.image=`/Sfarim/${t}`}return l[m]=h,await w(l),o.NextResponse.json(h)}catch(e){return console.error("Error updating book:",e),o.NextResponse.json({error:"Error updating book"},{status:500})}}async function x(e){try{let{searchParams:r}=new URL(e.url),t=r.get("id");if(!t)return o.NextResponse.json({error:"Missing book ID"},{status:400});let i=await f(),n=i.findIndex(e=>e.id===t);if(-1===n)return o.NextResponse.json({error:"Book not found"},{status:404});let s=d().join(process.cwd(),"public",i[n].image);try{await c().unlink(s)}catch(e){console.error("Error deleting image:",e)}return i.splice(n,1),await w(i),o.NextResponse.json({success:!0})}catch(e){return console.error("Error deleting book:",e),o.NextResponse.json({error:"Error deleting book"},{status:500})}}let b=new n.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/books/route",pathname:"/api/books",filename:"route",bundlePath:"app/api/books/route"},resolvedPagePath:"D:\\Sites\\Halachalemaase\\halacha\\app\\api\\books\\route.ts",nextConfigOutput:"",userland:i}),{workAsyncStorage:S,workUnitAsyncStorage:P,serverHooks:y}=b;function L(){return(0,a.patchFetch)({workAsyncStorage:S,workUnitAsyncStorage:P})}},6487:()=>{},8335:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[638,452],()=>t(1401));module.exports=i})();