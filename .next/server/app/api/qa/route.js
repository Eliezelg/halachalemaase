(()=>{var e={};e.id=644,e.ids=[644],e.modules={6330:e=>{"use strict";e.exports=require("@prisma/client")},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},9967:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>E,routeModule:()=>f,serverHooks:()=>g,workAsyncStorage:()=>q,workUnitAsyncStorage:()=>x});var s={};t.r(s),t.d(s,{DELETE:()=>A,GET:()=>l,POST:()=>w,PUT:()=>h});var n=t(2706),o=t(8203),a=t(5994),i=t(9187);let u=new(t(6330)).PrismaClient;class c extends Error{constructor(e){super(e),this.name="QAServiceError"}}function d(e){return{id:e.id.toString(),topic:e.topic,question:e.question,answer:e.answer,authorId:e.authorId,createdAt:e.createdAt.toISOString()}}let p={async getAllQAs(){try{return(await u.qA.findMany({orderBy:{createdAt:"desc"}})).map(d)}catch(e){throw console.error("Error getting all QAs:",e),new c("Failed to fetch QAs")}},async getQA(e){if(!e)throw new c("ID is required");try{let r=parseInt(e,10);if(isNaN(r))throw new c("Invalid ID format");let t=await u.qA.findUnique({where:{id:r}});return t?d(t):null}catch(r){throw console.error(`Error getting QA with id ${e}:`,r),new c("Failed to fetch QA")}},async createQA(e){if(!e.topic||!e.question||!e.answer||!e.authorId)throw new c("Missing required fields");try{let r=await u.qA.create({data:e});return d(r)}catch(e){throw console.error("Error creating QA:",e),new c("Failed to create QA")}},async updateQA(e,r){if(!e)throw new c("ID is required");try{let t=parseInt(e,10);if(isNaN(t))throw new c("Invalid ID format");let s=await u.qA.update({where:{id:t},data:r});return d(s)}catch(r){throw console.error(`Error updating QA with id ${e}:`,r),new c("Failed to update QA")}},async deleteQA(e){if(!e)throw new c("ID is required");try{let r=parseInt(e,10);if(isNaN(r))throw new c("Invalid ID format");return await u.qA.delete({where:{id:r}}),!0}catch(r){throw console.error(`Error deleting QA with id ${e}:`,r),new c("Failed to delete QA")}}};async function l(){try{let e=await p.getAllQAs();return i.NextResponse.json(e)}catch(e){return console.error("API Error - GET /api/qa:",e),i.NextResponse.json({error:e instanceof Error?e.message:"Error fetching QAs"},{status:500})}}async function w(e){try{let r=await e.json();if(!r.topic||!r.question||!r.answer)return i.NextResponse.json({error:"Missing required fields: topic, question, and answer are required"},{status:400});if(!["נדה","שבת","בשר בחלב","טבילת כלים","ברכות","תפילה","חגים","חושן משפט"].includes(r.topic))return i.NextResponse.json({error:"Invalid topic"},{status:400});let t=await p.createQA(r);return i.NextResponse.json(t,{status:201})}catch(e){return console.error("API Error - POST /api/qa:",e),i.NextResponse.json({error:e instanceof Error?e.message:"Error creating QA"},{status:500})}}async function h(e){try{let{id:r,...t}=await e.json();if(!r)return i.NextResponse.json({error:"ID is required"},{status:400});let s=await p.updateQA(r,t);if(!s)return i.NextResponse.json({error:"QA not found"},{status:404});return i.NextResponse.json(s)}catch(e){return console.error("API Error - PUT /api/qa:",e),i.NextResponse.json({error:e instanceof Error?e.message:"Error updating QA"},{status:500})}}async function A(e){try{let{id:r}=await e.json();if(!r)return i.NextResponse.json({error:"ID is required"},{status:400});if(!await p.deleteQA(r))return i.NextResponse.json({error:"QA not found"},{status:404});return i.NextResponse.json({success:!0})}catch(e){return console.error("API Error - DELETE /api/qa:",e),i.NextResponse.json({error:e instanceof Error?e.message:"Error deleting QA"},{status:500})}}let f=new n.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/qa/route",pathname:"/api/qa",filename:"route",bundlePath:"app/api/qa/route"},resolvedPagePath:"D:\\Sites\\Halachalemaase\\halacha\\app\\api\\qa\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:q,workUnitAsyncStorage:x,serverHooks:g}=f;function E(){return(0,a.patchFetch)({workAsyncStorage:q,workUnitAsyncStorage:x})}},6487:()=>{},8335:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[638,452],()=>t(9967));module.exports=s})();