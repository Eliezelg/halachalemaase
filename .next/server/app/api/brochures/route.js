(()=>{var e={};e.id=45,e.ids=[45],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},9748:e=>{"use strict";e.exports=require("fs/promises")},3873:e=>{"use strict";e.exports=require("path")},3012:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>b,routeModule:()=>y,serverHooks:()=>D,workAsyncStorage:()=>x,workUnitAsyncStorage:()=>g});var a={};t.r(a),t.d(a,{DELETE:()=>f,GET:()=>h,POST:()=>w});var s=t(2706),n=t(8203),i=t(5994),o=t(9187),u=t(9748),c=t(3873),d=t(5215);class l{constructor(e){this.filePath=(0,c.join)(process.cwd(),"data",`${e}.json`)}async readData(){try{let e=await (0,u.readFile)(this.filePath,"utf-8");return JSON.parse(e)}catch(e){return[]}}async writeData(e){await (0,u.writeFile)(this.filePath,JSON.stringify(e,null,2),"utf-8")}async getAll(){return this.readData()}async getById(e){return(await this.readData()).find(r=>r.id===e)||null}async create(e){let r=await this.readData(),t={...e,id:(0,d.A)()};return r.push(t),await this.writeData(r),t}async update(e,r){let t=await this.readData(),a=t.findIndex(r=>r.id===e);if(-1===a)return null;let s={...t[a],...r};return t[a]=s,await this.writeData(t),s}async delete(e){let r=await this.readData(),t=r.findIndex(r=>r.id===e);return -1!==t&&(r.splice(t,1),await this.writeData(r),!0)}}let p=new l;async function h(){try{let e=await p.readData("brochures");return o.NextResponse.json(e)}catch(e){return console.error("Error reading brochures:",e),o.NextResponse.json({error:"Failed to load brochures"},{status:500})}}async function w(e){try{let r=await e.json(),t=await p.readData("brochures")||[],a={id:Date.now().toString(),...r,date:new Date().toISOString()},s=t.filter(e=>e.type!==r.type),n=t.filter(e=>e.type===r.type),i=[a,...n.slice(0,4),...s];return await p.writeData("brochures",i),o.NextResponse.json(a)}catch(e){return console.error("Error creating brochure:",e),o.NextResponse.json({error:"Failed to create brochure"},{status:500})}}async function f(e){try{let{id:r}=await e.json(),t=(await p.readData("brochures")||[]).filter(e=>e.id!==r);return await p.writeData("brochures",t),o.NextResponse.json({success:!0})}catch(e){return console.error("Error deleting brochure:",e),o.NextResponse.json({error:"Failed to delete brochure"},{status:500})}}let y=new s.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/brochures/route",pathname:"/api/brochures",filename:"route",bundlePath:"app/api/brochures/route"},resolvedPagePath:"D:\\Sites\\Halachalemaase\\halacha\\app\\api\\brochures\\route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:x,workUnitAsyncStorage:g,serverHooks:D}=y;function b(){return(0,i.patchFetch)({workAsyncStorage:x,workUnitAsyncStorage:g})}},6487:()=>{},8335:()=>{},5215:(e,r,t)=>{"use strict";t.d(r,{A:()=>u});let a=require("crypto"),s={randomUUID:a.randomUUID},n=new Uint8Array(256),i=n.length,o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).slice(1));let u=function(e,r,t){if(s.randomUUID&&!r&&!e)return s.randomUUID();let u=(e=e||{}).random??e.rng?.()??(i>n.length-16&&((0,a.randomFillSync)(n),i=0),n.slice(i,i+=16));if(u.length<16)throw Error("Random bytes length must be >= 16");if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,r){if((t=t||0)<0||t+16>r.length)throw RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let e=0;e<16;++e)r[t+e]=u[e];return r}return function(e,r=0){return(o[e[r+0]]+o[e[r+1]]+o[e[r+2]]+o[e[r+3]]+"-"+o[e[r+4]]+o[e[r+5]]+"-"+o[e[r+6]]+o[e[r+7]]+"-"+o[e[r+8]]+o[e[r+9]]+"-"+o[e[r+10]]+o[e[r+11]]+o[e[r+12]]+o[e[r+13]]+o[e[r+14]]+o[e[r+15]]).toLowerCase()}(u)}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[638,452],()=>t(3012));module.exports=a})();