(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9273],{8301:(e,t,r)=>{Promise.resolve().then(r.bind(r,3811))},3811:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var a=r(5155),s=r(2115),l=r(4683),i=r(8810),n=r(5524);let o={topic:"נדה",question:"",answer:"",authorId:"",createdAt:new Date().toISOString()},d=()=>{let[e,t]=(0,s.useState)([]),[r,d]=(0,s.useState)([]),[c,u]=(0,s.useState)(!1),[h,m]=(0,s.useState)(o),[x,p]=(0,s.useState)(!1),[b,y]=(0,s.useState)(null),[f,g]=(0,s.useState)(!1);(0,s.useEffect)(()=>{p(!0),j()},[]);let j=async()=>{try{let e=await fetch("/api/rabbis");if(!e.ok)throw Error("Failed to load rabbis");let t=await e.json();d(t)}catch(e){console.error("Error loading rabbis:",e),y("שגיאה בטעינת רשימת הרבנים")}},w=()=>h.topic?h.question&&""!==h.question.trim()?h.answer&&""!==h.answer.trim()?!!h.authorId||(y("נא לבחור רב"),!1):(y("נא להזין תשובה"),!1):(y("נא להזין שאלה"),!1):(y("נא לבחור נושא"),!1),v=async e=>{if(e.preventDefault(),y(null),w()){g(!0);try{let e={...h,createdAt:h.createdAt||new Date().toISOString()},t=h.id?await fetch("/api/qa",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:h.id,...e})}):await fetch("/api/qa",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw Error(e.error||"שגיאה בשמירת השאלה")}u(!1),m(o),k()}catch(e){console.error("Error saving QA:",e),y(e instanceof Error?e.message:"שגיאה בשמירת השאלה")}finally{g(!1)}}},N=async e=>{if(confirm("האם אתה בטוח שברצונך למחוק שאלה זו?"))try{if(!(await fetch("/api/qa",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})})).ok)throw Error("שגיאה במחיקת השאלה");k()}catch(e){console.error("Error deleting QA:",e),y("שגיאה במחיקת השאלה")}},k=async()=>{try{let e=await fetch("/api/qa");if(!e.ok)throw Error("שגיאה בטעינת השאלות");let r=await e.json();t(r||[])}catch(e){console.error("Error loading QAs:",e),y("שגיאה בטעינת השאלות"),t([])}};return((0,s.useEffect)(()=>{k()},[]),x)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("button",{onClick:()=>{m(o),u(!0),y(null)},className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 flex items-center gap-2",children:[(0,a.jsx)(l.A,{size:20}),"הוסף שאלה חדשה"]}),b&&(0,a.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:(0,a.jsx)("span",{className:"block sm:inline",children:b})}),c&&(0,a.jsxs)("form",{onSubmit:v,className:"space-y-4 bg-gray-50 p-4 rounded",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"נושא"}),(0,a.jsx)("select",{value:h.topic||"",onChange:e=>m(t=>({...t,topic:e.target.value})),className:"mt-1 block w-full rounded border-gray-300 shadow-sm",required:!0,children:["נדה","שבת","בשר בחלב","טבילת כלים","ברכות","תפילה","חגים","חושן משפט"].map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"רב"}),(0,a.jsxs)("select",{value:h.authorId||"",onChange:e=>m(t=>({...t,authorId:e.target.value})),className:"mt-1 block w-full rounded border-gray-300 shadow-sm",required:!0,children:[(0,a.jsx)("option",{value:"",children:"בחר רב"}),r.map(e=>(0,a.jsxs)("option",{value:e.id,children:["הרב ",e.firstName," ",e.lastName]},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"שאלה"}),(0,a.jsx)("textarea",{value:h.question||"",onChange:e=>m(t=>({...t,question:e.target.value})),className:"mt-1 block w-full rounded border-gray-300 shadow-sm",rows:3,required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"תשובה"}),(0,a.jsx)("textarea",{value:h.answer||"",onChange:e=>m(t=>({...t,answer:e.target.value})),className:"mt-1 block w-full rounded border-gray-300 shadow-sm",rows:6,required:!0})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{u(!1),m(o)},className:"px-4 py-2 border rounded hover:bg-gray-50",children:"ביטול"}),(0,a.jsxs)("button",{type:"submit",disabled:f,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:[f?"שומר...":h.id?"עדכן":"הוסף"," שאלה"]})]})]}),(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>{let t=r.find(t=>t.id===e.authorId);return(0,a.jsx)("div",{className:"border rounded-lg p-4 bg-white",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("span",{className:"px-3 py-1 bg-primary-100 text-primary-800 rounded-full text-sm",children:e.topic}),(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:new Date(e.createdAt).toLocaleDateString("he-IL")})]}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-primary-900 mb-2",children:e.question}),(0,a.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:e.answer}})}),t&&(0,a.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:['נכתב ע"י: הרב ',t.firstName," ",t.lastName]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>{m(e),u(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded",children:(0,a.jsx)(i.A,{size:20})}),(0,a.jsx)("button",{onClick:()=>N(e.id),className:"p-2 text-red-600 hover:bg-red-50 rounded",children:(0,a.jsx)(n.A,{size:20})})]})]})},e.id)})})]}):null};function c(){return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"ניהול שאלות ותשובות"}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:(0,a.jsx)(d,{})})]})}},4057:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(2115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:d="",children:c,iconNode:u,...h}=e;return(0,a.createElement)("svg",{ref:t,...i,width:s,height:s,stroke:r,strokeWidth:o?24*Number(n)/Number(s):n,className:l("lucide",d),...h},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),o=(e,t)=>{let r=(0,a.forwardRef)((r,i)=>{let{className:o,...d}=r;return(0,a.createElement)(n,{ref:i,iconNode:t,className:l("lucide-".concat(s(e)),o),...d})});return r.displayName="".concat(e),r}},8810:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(4057).A)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},4683:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(4057).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5524:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(4057).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[8441,1517,7358],()=>t(8301)),_N_E=e.O()}]);